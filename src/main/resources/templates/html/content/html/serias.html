<!--Правила: при добавлении ногового выпадающего списка у тэга ul id = *псевдоним*+ComboBox,
button`s id = *псевдоним* + List-->
<script>

    /** Наши данные для выпадающих списков **/
    class Data {
        character =["Персонаж 1", "Персонаж 2", "Персонаж 3", "Персонаж 4"];
        time = ["Будущее", "Прошлое", "Настоящее"];
        planet = ["Земля", "Планета 1", "Планета 2", "Планета 3"];
        doctor = ["1","2","3","4","5","6","7","8","8.5","9","10","11","12","13"];

        getByIndex(i){
            if(i === 'character')
                return this.character;
            else if(i === 'time')
                return this.time;
            else if(i === 'planet')
                return this.planet;
            else if(i === 'doctor')
                return this.doctor;
        }
        // TODO:: to add later
    }

    /** Собираем массив псевдонимов для всех выпадающих списков.
     * Чтобы избежать путаницы при добавлении нового списка в радномном месте, создаем динамически сборщик псевдонимов.
     * По псевдониму в дальнейшем формируются имена id для различных компонентов
     * При загрузке окна назначаем обработчик событий для всех выпадающих списков:
     * если произошло первое нажатие, загружаем данные, иначе ничего не меняем
     * TODO:: В дальнейшем: при редактировании поля для поиска, задавать значение аттрибута isLoad = false
     * **/

    window.onload = function() {
       psevdoname = [];
       const column =  document.getElementsByClassName("col");
       for(let i = 0; i<column.length; i++) {
           if(column[i].getAttribute("name") !== null)
                psevdoname.push(column[i].getAttribute("name"));
       }

        for(let i = 0; i<psevdoname.length; ++i) {
            const list = document.getElementById(psevdoname[i]+'ListBut');
            const cmbox = document.getElementById(psevdoname[i] + 'ComboBox');
            cmbox.setAttribute("isLoad", "false")

            list.addEventListener("click", function () {
                if(cmbox.getAttribute("isLoad") === "false") {
                    cmbox.setAttribute("isLoad", "true");
                    cmbox.innerHTML = generateList(psevdoname[i]);
                }
            });
        }

        var inputs = document.getElementsByTagName("input");
        const data = new Data();

        for(let i = 0; i<inputs.length; ++i){
            let id = inputs[i].getAttribute("id");
            /* id = id + 'ComboBox';
             var comboBox = document.getElementById(id);
             idComboBoxList[i] = id;*/


            inputs[i].addEventListener("input", function () {
                var combobox = document.getElementById("testCom");

            });
        }
    };

    function generateList(name) {
        let ans = '';
        const map = new Data();
        const data = map.getByIndex(name)
        for(let i = 0; i<data.length; ++i)
            ans = ans + "<li class=\"dropdown-item\">" + data[i] + "</li>";

        return ans;
    }

</script>

<!--Псевдоним: character-->
<div class="row container-fluid">
    <div class="col" name="character">

        <a href="#" class="badge badge-primary" style="margin-bottom: 10px; display: block; width: 140px">Показать выбранное</a>
        <div class="input-append btn-group" style="margin-bottom: 10px">
            <button id="characterListBut" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                    style="border-top-right-radius: 0px; border-bottom-right-radius: 0px">
            </button>
            <div class="dropdown">
                <ul class="dropdown-menu" id="characterComboBox">
                </ul>
            </div>
            <input class="text-input" title="Персонажи" placeholder="Персонажи" id="characterField" size="18" type="text">
        </div>
    </div>

    <!--TODO:: СДЕЛАТЬ ФИЛЬТРАЦИЮ-->

    <!--Псевдоним: time-->
    <div class="col" name="time">

        <a href="#" class="badge badge-primary" style="margin-bottom: 10px; display: block; width: 140px">Показать выбранное</a>

        <div class="input-append btn-group" style="margin-bottom: 10px">
            <button id="timeListBut" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                    style="border-top-right-radius: 0px; border-bottom-right-radius: 0px">
            </button>
            <div class="dropdown">
                <ul class="dropdown-menu" id="timeComboBox">
                </ul>
            </div>
            <input class="text-input" placeholder="Время" id="filterForTime" size="18" type="text">
        </div>
    </div>

    <!--Псевдоним: planet-->
    <div class="col" name="planet">
        <a href="#" class="badge badge-primary" style="margin-bottom: 10px; display: block; width: 140px">Показать выбранное</a>
        <div class="input-append btn-group" style="margin-bottom: 10px">
            <button id="planetListBut" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                    style="border-top-right-radius: 0px; border-bottom-right-radius: 0px">
            </button>

            <div class="dropdown">
                <ul class="dropdown-menu" id="planetComboBox">
                </ul>
            </div>
            <input class="text-input" placeholder="Планета" id="filterForPlanet" size="18" type="text">
        </div>
    </div>

    <!--    Псевдоним: doctor-->
    <div class="col" name="doctor">

        <a href="#" class="badge badge-primary" style="margin-bottom: 10px; display: block; width: 140px">Показать выбранное</a>

        <div class="input-append btn-group" style="margin-bottom: 10px">
            <button id="doctorListBut" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                    style="border-top-right-radius: 0px; border-bottom-right-radius: 0px">
            </button>
            <div class="dropdown">
                <ul class="dropdown-menu" id="doctorComboBox">
                </ul>
            </div>
            <input class="text-input" placeholder="Доктор" id="filterForNumberDoctor" size="18" type="text">
        </div>
    </div>
</div>

<table id="table-data" class="table table-striped table-bordered" style="margin-top: 50px">
    <thead>
    <tr class="table-info">
        <th style="width: 10%" scope="col">№</th>
        <th style="width: 20%" scope="col">Название</th>
        <th style="width: 70%" scope="col">Описание</th>
    </tr>
    </thead>

    <tbody>
    <tr>
        <th scope="row">1</th>
        <th>TEST</th>
        <th>TEST</th>
    </tr>
    </tbody>
</table>